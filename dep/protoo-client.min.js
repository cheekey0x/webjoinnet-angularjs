(function(h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).protooClient=h()})(function(){return function(){function h(l,g,k){function f(b,a){if(!g[b]){if(!l[b]){var d="function"==typeof require&&require;if(!a&&d)return d(b,!0);if(c)return c(b,!0);a=Error("Cannot find module '"+b+"'");throw a.code="MODULE_NOT_FOUND",
a;}a=g[b]={exports:{}};l[b][0].call(a.exports,function(a){return f(l[b][1][a]||a)},a,a.exports,h,l,g,k)}return g[b].exports}for(var c="function"==typeof require&&require,a=0;a<k.length;a++)f(k[a]);return f}return h}()({1:[function(h,l,g){function k(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=m(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function f(b,a,d,e){var c;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');
if(c=b._events){c.newListener&&(b.emit("newListener",a,d.listener?d.listener:d),c=b._events);var p=c[a]}else c=b._events=m(null),b._eventsCount=0;p?("function"===typeof p?p=c[a]=e?[d,p]:[p,d]:e?p.unshift(d):p.push(d),p.warned||(d=void 0===b._maxListeners?k.defaultMaxListeners:b._maxListeners)&&0<d&&p.length>d&&(p.warned=!0,d=Error("Possible EventEmitter memory leak detected. "+p.length+' "'+String(a)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),d.name="MaxListenersExceededWarning",
d.emitter=b,d.type=a,d.count=p.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",d.name,d.message))):(c[a]=d,++b._eventsCount);return b}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var b=Array(arguments.length),a=0;a<b.length;++a)b[a]=arguments[a];this.listener.apply(this.target,b)}}function a(b,a,d){b={fired:!1,wrapFn:void 0,target:b,type:a,listener:d};a=u.call(c,b);a.listener=d;return b.wrapFn=a}function b(b){var a=this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function n(b,a){for(var d=Array(a),c=0;c<a;++c)d[c]=b[c];return d}function d(b){var a=function(){};a.prototype=b;return new a}function e(b){var a=
[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&a.push(d);return d}function r(b){var a=this;return function(){return a.apply(b,arguments)}}var m=Object.create||d,q=Object.keys||e,u=Function.prototype.bind||r;l.exports=k;k.EventEmitter=k;k.prototype._events=void 0;k.prototype._maxListeners=void 0;var t=10;try{h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0});var v=0===h.x}catch(p){v=!1}v?Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return t},
set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');t=b}}):k.defaultMaxListeners=t;k.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=b;return this};k.prototype.getMaxListeners=function(){return void 0===this._maxListeners?k.defaultMaxListeners:this._maxListeners};k.prototype.emit=function(b){var a,d,c;var e="error"===b;if(c=
this._events)e=e&&null==c.error;else if(!e)return!1;if(e){1<arguments.length&&(a=arguments[1]);if(a instanceof Error)throw a;c=Error('Unhandled "error" event. ('+a+")");c.context=a;throw c;}a=c[b];if(!a)return!1;c="function"===typeof a;var f=arguments.length;switch(f){case 1:if(c)a.call(this);else for(c=a.length,a=n(a,c),e=0;e<c;++e)a[e].call(this);break;case 2:e=arguments[1];if(c)a.call(this,e);else for(c=a.length,a=n(a,c),f=0;f<c;++f)a[f].call(this,e);break;case 3:e=arguments[1];f=arguments[2];
if(c)a.call(this,e,f);else for(c=a.length,a=n(a,c),d=0;d<c;++d)a[d].call(this,e,f);break;case 4:e=arguments[1];f=arguments[2];d=arguments[3];if(c)a.call(this,e,f,d);else{c=a.length;a=n(a,c);for(var g=0;g<c;++g)a[g].call(this,e,f,d)}break;default:e=Array(f-1);for(d=1;d<f;d++)e[d-1]=arguments[d];if(c)a.apply(this,e);else for(c=a.length,a=n(a,c),f=0;f<c;++f)a[f].apply(this,e)}return!0};k.prototype.addListener=function(a,b){return f(this,a,b,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=
function(a,b){return f(this,a,b,!0)};k.prototype.once=function(b,d){if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');this.on(b,a(this,b,d));return this};k.prototype.prependOnceListener=function(b,d){if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');this.prependListener(b,a(this,b,d));return this};k.prototype.removeListener=function(a,b){var d;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
var c=this._events;if(!c)return this;var e=c[a];if(!e)return this;if(e===b||e.listener===b)0===--this._eventsCount?this._events=m(null):(delete c[a],c.removeListener&&this.emit("removeListener",a,e.listener||b));else if("function"!==typeof e){var f=-1;for(d=e.length-1;0<=d;d--)if(e[d]===b||e[d].listener===b){var n=e[d].listener;f=d;break}if(0>f)return this;if(0===f)e.shift();else{d=f+1;for(var g=e.length;d<g;f+=1,d+=1)e[f]=e[d];e.pop()}1===e.length&&(c[a]=e[0]);c.removeListener&&this.emit("removeListener",
a,n||b)}return this};k.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=m(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=m(null):delete b[a]),this;if(0===arguments.length){var d=q(b);for(b=0;b<d.length;++b){var c=d[b];"removeListener"!==c&&this.removeAllListeners(c)}this.removeAllListeners("removeListener");this._events=m(null);this._eventsCount=0;return this}d=b[a];if("function"===
typeof d)this.removeListener(a,d);else if(d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};k.prototype.listeners=function(b){var a=this._events;if(a)if(b=a[b])if("function"===typeof b)b=[b.listener||b];else{a=Array(b.length);for(var d=0;d<a.length;++d)a[d]=b[d].listener||b[d];b=a}else b=[];else b=[];return b};k.listenerCount=function(a,d){return"function"===typeof a.listenerCount?a.listenerCount(d):b.call(a,d)};k.prototype.listenerCount=b;k.prototype.eventNames=function(){return 0<
this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(h,l,g){function k(){throw Error("setTimeout has not been defined");}function f(){throw Error("clearTimeout has not been defined");}function c(b){if(r===setTimeout)return setTimeout(b,0);if((r===k||!r)&&setTimeout)return r=setTimeout,setTimeout(b,0);try{return r(b,0)}catch(w){try{return r.call(null,b,0)}catch(x){return r.call(this,b,0)}}}function a(b){if(m===clearTimeout)return clearTimeout(b);if((m===f||!m)&&clearTimeout)return m=
clearTimeout,clearTimeout(b);try{return m(b)}catch(w){try{return m.call(null,b)}catch(x){return m.call(this,b)}}}function b(){u&&t&&(u=!1,t.length?q=t.concat(q):v=-1,q.length&&n())}function n(){if(!u){var d=c(b);u=!0;for(var e=q.length;e;){t=q;for(q=[];++v<e;)t&&t[v].run();v=-1;e=q.length}t=null;u=!1;a(d)}}function d(b,a){this.fun=b;this.array=a}function e(){}h=l.exports={};try{var r="function"===typeof setTimeout?setTimeout:k}catch(p){r=k}try{var m="function"===typeof clearTimeout?clearTimeout:f}catch(p){m=
f}var q=[],u=!1,t,v=-1;h.nextTick=function(b){var a=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)a[e-1]=arguments[e];q.push(new d(b,a));1!==q.length||u||c(n)};d.prototype.run=function(){this.fun.apply(null,this.array)};h.title="browser";h.browser=!0;h.env={};h.argv=[];h.version="";h.versions={};h.on=e;h.addListener=e;h.once=e;h.off=e;h.removeListener=e;h.removeAllListeners=e;h.emit=e;h.prependListener=e;h.prependOnceListener=e;h.listeners=function(b){return[]};
h.binding=function(b){throw Error("process.binding is not supported");};h.cwd=function(){return"/"};h.chdir=function(b){throw Error("process.chdir is not supported");};h.umask=function(){return 0}},{}],3:[function(h,l,g){var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f=function(){function b(b,a){for(var d=0;d<a.length;d++){var c=a[d];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(b,c.key,c)}}return function(a,d,c){d&&b(a.prototype,d);c&&b(a,c);return a}}(),c=h("./logger")("Message"),a=h("./utils");h=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");}f(b,null,[{key:"parse",value:function(b){var a=void 0,e={};try{a=JSON.parse(b)}catch(r){c.error("parse() | invalid JSON: %s",r);return}if("object"!==("undefined"===typeof a?"undefined":k(a))||
Array.isArray(a))c.error("parse() | not an object");else{if(a.request){e.request=!0;if("string"!==typeof a.method){c.error("parse() | missing/invalid method field");return}if("number"!==typeof a.id){c.error("parse() | missing/invalid id field");return}e.id=a.id;e.method=a.method;e.data=a.data||{}}else if(a.response){e.response=!0;if("number"!==typeof a.id){c.error("parse() | missing/invalid id field");return}e.id=a.id;a.ok?(e.ok=!0,e.data=a.data||{}):(e.errorCode=a.errorCode,e.errorReason=a.errorReason)}else if(a.notification){e.notification=
!0;if("string"!==typeof a.method){c.error("parse() | missing/invalid method field");return}e.method=a.method;e.data=a.data||{}}else{c.error("parse() | missing request/response field");return}return e}}},{key:"requestFactory",value:function(b,d){return{request:!0,id:a.randomNumber(),method:b,data:d||{}}}},{key:"successResponseFactory",value:function(b,a){return{response:!0,id:b.id,ok:!0,data:a||{}}}},{key:"errorResponseFactory",value:function(b,a,c){return{response:!0,id:b.id,errorCode:a,errorReason:c}}},
{key:"notificationFactory",value:function(b,a){return{notification:!0,method:b,data:a||{}}}}]);return b}();l.exports=h},{"./logger":6,"./utils":9}],4:[function(h,l,g){function k(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var f=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}();g=h("events").EventEmitter;var c=h("./logger")("Peer"),a=h("./Message");h=function(b){function g(a){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");c.debug("constructor()");var b=(g.__proto__||Object.getPrototypeOf(g)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.setMaxListeners(Infinity);b._transport=a;b._closed=!1;b._data={};b._requestHandlers=new Map;b._handleTransport();return b}k(g,b);f(g,[{key:"send",value:function(b,c){var d=this,e=a.requestFactory(b,c);return this._transport.send(e).then(function(){return new Promise(function(b,a){var c={resolve:function(a){d._requestHandlers.delete(e.id)&&(clearTimeout(c.timer),b(a))},reject:function(b){d._requestHandlers.delete(e.id)&&(clearTimeout(c.timer),
a(b))},timer:setTimeout(function(){d._requestHandlers.delete(e.id)&&a(Error("request timeout"))},2E4),close:function(){clearTimeout(c.timer);a(Error("peer closed"))}};d._requestHandlers.set(e.id,c)})})}},{key:"notify",value:function(b,c){b=a.notificationFactory(b,c);return this._transport.send(b)}},{key:"close",value:function(){c.debug("close()");this._closed||(this._closed=!0,this._transport.close(),this._requestHandlers.forEach(function(b){return b.close()}),this.emit("close"))}},{key:"_handleTransport",
value:function(){var b=this;this._transport.closed?(this._closed=!0,setTimeout(function(){return b.emit("close")})):(this._transport.on("connecting",function(a){b.emit("connecting",a)}),this._transport.on("open",function(){b._closed||b.emit("open")}),this._transport.on("disconnected",function(){b.emit("disconnected")}),this._transport.on("failed",function(a){b.emit("failed",a)}),this._transport.on("close",function(){b._closed||(b._closed=!0,b.emit("close"))}),this._transport.on("message",function(a){a.request?
b._handleRequest(a):a.response?b._handleResponse(a):a.notification&&b._handleNotification(a)}))}},{key:"_handleRequest",value:function(b){var d=this;this.emit("request",b,function(e){e=a.successResponseFactory(b,e);d._transport.send(e).catch(function(b){c.warn("accept() failed, response could not be sent: %o",b)})},function(e,f){e instanceof Error?(f=e.toString(),e=500):"number"===typeof e&&f instanceof Error&&(f=f.toString());e=a.errorResponseFactory(b,e,f);d._transport.send(e).catch(function(b){c.warn("reject() failed, response could not be sent: %o",
b)})})}},{key:"_handleResponse",value:function(b){var a=this._requestHandlers.get(b.id);if(a)if(b.ok)a.resolve(b.data);else{var d=Error(b.errorReason);d.code=b.errorCode;a.reject(d)}else c.error("received response does not match any sent request")}},{key:"_handleNotification",value:function(b){this.emit("notification",b)}},{key:"data",get:function(){return this._data},set:function(b){this._data=b||{}}},{key:"closed",get:function(){return this._closed}}]);return g}(g);l.exports=h},{"./Message":3,"./logger":6,
events:1}],5:[function(h,l,g){g=h("./Peer");h=h("./transports");l.exports={Peer:g,WebSocketTransport:h.WebSocketTransport}},{"./Peer":4,"./transports":8}],6:[function(h,l,g){var k=function(){function a(b,a){for(var c=0;c<a.length;c++){var e=a[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=h("debug"),c=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
b?(this._debug=f("protoo-client:"+b),this._warn=f("protoo-client:WARN:"+b),this._error=f("protoo-client:ERROR:"+b)):(this._debug=f("protoo-client"),this._warn=f("protoo-client:WARN"),this._error=f("protoo-client:ERROR"));this._debug.log=console.info.bind(console);this._warn.log=console.warn.bind(console);this._error.log=console.error.bind(console)}k(a,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]);
return a}();l.exports=function(a){return new c(a)}},{debug:10}],7:[function(h,l,g){function k(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var f=function(){function b(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;
d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();g=h("events").EventEmitter;var c=h("websocket").w3cwebsocket,a=h("retry"),b=h("../logger")("WebSocketTransport"),n=h("../Message"),d={retries:10,factor:2,minTimeout:1E3,maxTimeout:8E3};h=function(e){function g(a,c){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");b.debug('constructor() [url:"%s", options:%o]',a,c);var d=
(g.__proto__||Object.getPrototypeOf(g)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.setMaxListeners(Infinity);d._url=a;d._options=c||{};d._ws=null;d._closed=!1;d._setWebSocket();return d}k(g,e);f(g,[{key:"send",value:function(a){if(this._closed)return Promise.reject(Error("transport closed"));try{return this._ws.send(JSON.stringify(a)),Promise.resolve()}catch(q){return b.error("send() | error sending message: %o",
q),Promise.reject(q)}}},{key:"close",value:function(){b.debug("close()");if(!this._closed){this._closed=!0;this.emit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(m){b.error("close() | error closing the WebSocket: %o",m)}}}},{key:"_setWebSocket",value:function(){var e=this,f=this._options,g=a.operation(this._options.retry||d),h=!1;g.attempt(function(a){e._closed?g.stop():(b.debug("_setWebSocket() [currentAttempt:%s]",a),
e._ws=new c(e._url,"protoo",f.origin,f.headers,f.requestOptions,f.clientConfig),e.emit("connecting",a),e._ws.onopen=function(){e._closed||(h=!0,e.emit("open"))},e._ws.onclose=function(c){if(!e._closed){b.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',c.wasClean,c.code,c.reason);if(4E3!==c.code){if(h){g.stop();e.emit("disconnected");e._setWebSocket();return}e.emit("failed",a);if(g.retry(!0))return}e._closed=!0;e.emit("close")}},e._ws.onerror=function(){e._closed||b.error('WebSocket "error" event')},
e._ws.onmessage=function(a){e._closed||(a=n.parse(a.data))&&(0===e.listenerCount("message")?b.error('no listeners for WebSocket "message" event, ignoring received message'):e.emit("message",a))})})}},{key:"closed",get:function(){return this._closed}}]);return g}(g);l.exports=h},{"../Message":3,"../logger":6,events:1,retry:14,websocket:17}],8:[function(h,l,g){h=h("./WebSocketTransport");l.exports={WebSocketTransport:h}},{"./WebSocketTransport":7}],9:[function(h,l,g){h=h("random-number").generator({min:1E6,
max:9999999,integer:!0});l.exports={randomNumber:h}},{"random-number":13}],10:[function(h,l,g){(function(k){function f(){try{var b=g.storage.debug}catch(n){}!b&&"undefined"!==typeof k&&"env"in k&&(b=k.env.DEBUG);return b}g=l.exports=h("./debug");g.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};g.formatArgs=function(b){var a=this.useColors;b[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+b[0]+(a?"%c ":" ")+"+"+g.humanize(this.diff);
if(a){a="color: "+this.color;b.splice(1,0,a,"color: inherit");var c=0,e=0;b[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(c++,"%c"===a&&(e=c))});b.splice(e,0,a)}};g.save=function(a){try{null==a?g.storage.removeItem("debug"):g.storage.debug=a}catch(n){}};g.load=f;g.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==
typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var c=
g;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var a=chrome.storage.local;else a:{try{a=window.localStorage;break a}catch(b){}a=void 0}c.storage=a;g.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
g.formatters.j=function(a){try{return JSON.stringify(a)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};g.enable(f())}).call(this,h("_process"))},{"./debug":11,_process:2}],11:[function(h,l,g){function k(a){var b=0,c;for(c in a)b=(b<<5)-b+a.charCodeAt(c),b|=0;return g.colors[Math.abs(b)%g.colors.length]}function f(a){function b(){if(b.enabled){var a=+new Date;b.diff=a-(f||a);b.prev=f;f=b.curr=a;var c=Array(arguments.length);for(a=0;a<c.length;a++)c[a]=arguments[a];c[0]=g.coerce(c[0]);"string"!==
typeof c[0]&&c.unshift("%O");var h=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(a,d){if("%%"===a)return a;h++;d=g.formatters[d];"function"===typeof d&&(a=d.call(b,c[h]),c.splice(h,1),h--);return a});g.formatArgs.call(b,c);(b.log||g.log||console.log.bind(console)).apply(b,c)}}var f;b.namespace=a;b.enabled=g.enabled(a);b.useColors=g.useColors();b.color=k(a);b.destroy=c;"function"===typeof g.init&&g.init(b);g.instances.push(b);return b}function c(){var a=g.instances.indexOf(this);return-1!==a?(g.instances.splice(a,
1),!0):!1}g=l.exports=f.debug=f["default"]=f;g.coerce=function(a){return a instanceof Error?a.stack||a.message:a};g.disable=function(){g.enable("")};g.enable=function(a){g.save(a);g.names=[];g.skips=[];var b,c=("string"===typeof a?a:"").split(/[\s,]+/),d=c.length;for(b=0;b<d;b++)c[b]&&(a=c[b].replace(/\*/g,".*?"),"-"===a[0]?g.skips.push(new RegExp("^"+a.substr(1)+"$")):g.names.push(new RegExp("^"+a+"$")));for(b=0;b<g.instances.length;b++)a=g.instances[b],a.enabled=g.enabled(a.namespace)};g.enabled=
function(a){if("*"===a[a.length-1])return!0;var b;var c=0;for(b=g.skips.length;c<b;c++)if(g.skips[c].test(a))return!1;c=0;for(b=g.names.length;c<b;c++)if(g.names[c].test(a))return!0;return!1};g.humanize=h("ms");g.instances=[];g.names=[];g.skips=[];g.formatters={}},{ms:12}],12:[function(h,l,g){function k(c){c=String(c);if(!(100<c.length)&&(c=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c))){var a=parseFloat(c[1]);switch((c[2]||
"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*a;case "days":case "day":case "d":return 864E5*a;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*a;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*a;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*a;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return a}}}function f(c,a,b){if(!(c<a))return c<1.5*a?Math.floor(c/a)+
" "+b:Math.ceil(c/a)+" "+b+"s"}l.exports=function(c,a){a=a||{};var b=typeof c;if("string"===b&&0<c.length)return k(c);if("number"===b&&!1===isNaN(c))return a.long?f(c,864E5,"day")||f(c,36E5,"hour")||f(c,6E4,"minute")||f(c,1E3,"second")||c+" ms":864E5<=c?Math.round(c/864E5)+"d":36E5<=c?Math.round(c/36E5)+"h":6E4<=c?Math.round(c/6E4)+"m":1E3<=c?Math.round(c/1E3)+"s":c+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c));}},{}],13:[function(h,l,g){void function(g){function f(a){a=
a||{};var b=a.min,c=a.max;a=a.integer||!1;null==b&&null==c?(b=0,c=1):null==b?b=c-1:null==c&&(c=b+1);if(c<b)throw Error("invalid options, max must be >= min");return{min:b,max:c,integer:a}}function c(a){a=f(a);if(a.max===a.min)return a.min;var b=Math.random()*(a.max-a.min+Number(!!a.integer))+a.min;return a.integer?Math.floor(b):b}l.exports=c;l.exports.generator=function(a){a=f(a);return function(b,f,d){a.min=null!=b?b:a.min;a.max=null!=f?f:a.max;a.integer=null!=d?d:a.integer;return c(a)}};l.exports.defaults=
f}(this)},{}],14:[function(h,l,g){l.exports=h("./lib/retry")},{"./lib/retry":15}],15:[function(h,l,g){var k=h("./retry_operation");g.operation=function(f){var c=g.timeouts(f);return new k(c,{forever:f&&f.forever,unref:f&&f.unref})};g.timeouts=function(f){if(f instanceof Array)return[].concat(f);var c={retries:10,factor:2,minTimeout:1E3,maxTimeout:Infinity,randomize:!1};for(a in f)c[a]=f[a];if(c.minTimeout>c.maxTimeout)throw Error("minTimeout is greater than maxTimeout");var a=[];for(var b=0;b<c.retries;b++)a.push(this.createTimeout(b,
c));f&&f.forever&&!a.length&&a.push(this.createTimeout(b,c));a.sort(function(a,b){return a-b});return a};g.createTimeout=function(f,c){f=Math.round((c.randomize?Math.random()+1:1)*c.minTimeout*Math.pow(c.factor,f));return f=Math.min(f,c.maxTimeout)};g.wrap=function(f,c,a){c instanceof Array&&(a=c,c=null);if(!a){a=[];for(var b in f)"function"===typeof f[b]&&a.push(b)}for(b=0;b<a.length;b++){var h=a[b],d=f[h];f[h]=function(){var a=g.operation(c),b=Array.prototype.slice.call(arguments),h=b.pop();b.push(function(b){a.retry(b)||
(b&&(arguments[0]=a.mainError()),h.apply(this,arguments))});a.attempt(function(){d.apply(f,b)})};f[h].options=c}}},{"./retry_operation":16}],16:[function(h,l,g){function k(f,c){"boolean"===typeof c&&(c={forever:c});this._timeouts=f;this._options=c||{};this._fn=null;this._errors=[];this._attempts=1;this._timeout=this._operationTimeoutCb=this._operationTimeout=null;this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}l.exports=k;k.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout);
this._timeouts=[];this._cachedTimeouts=null};k.prototype.retry=function(f){this._timeout&&clearTimeout(this._timeout);if(!f)return!1;this._errors.push(f);f=this._timeouts.shift();if(void 0===f)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),f=this._timeouts.shift();else return!1;var c=this;f=setTimeout(function(){c._attempts++;c._operationTimeoutCb&&(c._timeout=setTimeout(function(){c._operationTimeoutCb(c._attempts)},
c._operationTimeout),this._options.unref&&c._timeout.unref());c._fn(c._attempts)},f);this._options.unref&&f.unref();return!0};k.prototype.attempt=function(f,c){this._fn=f;c&&(c.timeout&&(this._operationTimeout=c.timeout),c.cb&&(this._operationTimeoutCb=c.cb));var a=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){a._operationTimeoutCb()},a._operationTimeout));this._fn(this._attempts)};k.prototype.try=function(f){console.log("Using RetryOperation.try() is deprecated");this.attempt(f)};
k.prototype.start=function(f){console.log("Using RetryOperation.start() is deprecated");this.attempt(f)};k.prototype.start=k.prototype.try;k.prototype.errors=function(){return this._errors};k.prototype.attempts=function(){return this._attempts};k.prototype.mainError=function(){if(0===this._errors.length)return null;for(var f={},c=null,a=0,b=0;b<this._errors.length;b++){var g=this._errors[b],d=g.message,e=(f[d]||0)+1;f[d]=e;e>=a&&(c=g,a=e)}return c}},{}],17:[function(h,l,g){function k(c,a){return a?
new f(c,a):new f(c)}g=function(){return this}();var f=g.WebSocket||g.MozWebSocket;h=h("./version");f&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(c){Object.defineProperty(k,c,{get:function(){return f[c]}})});l.exports={w3cwebsocket:f?k:null,version:h}},{"./version":18}],18:[function(h,l,g){l.exports=h("../package.json").version},{"../package.json":19}],19:[function(h,l,g){l.exports={version:"1.0.26"}},{}]},{},[5])(5)});
